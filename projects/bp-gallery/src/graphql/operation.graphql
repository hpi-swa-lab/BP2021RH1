query getPictureInfo($pictureId: ID!) {
  picture(id: $pictureId) {
    data {
      attributes {
        title {
          data {
            id
            attributes {
              text
            }
          }
        }
        descriptions {
          data {
            id
            attributes {
              text
            }
          }
        }
        time_range_tag {
          data {
            id
            attributes {
              start
              end
            }
          }
        }
        media {
          data {
            attributes {
              url
            }
          }
        }
        comments {
          data {
            id
            attributes {
              text
              author
              date
            }
          }
        }
      }
    }
  }
}

query getPictures($filters: PictureFiltersInput!, $pagination: PaginationArg!) {
  pictures(filters: $filters, pagination: $pagination) {
    data {
      id
      attributes {
        media {
          data {
            attributes {
              width
              height
              formats
            }
          }
        }
      }
    }
  }
}

query getLatestPicturesCategoryInfo($date: DateTime!) {
  categoryTags(where: { updated_at_gt: $date }) {
    id
    name
    thumbnail: pictures(limit: 1) {
      media {
        formats
      }
    }
    related_tags {
      id
      name
      thumbnail: pictures(limit: 1) {
        media {
          formats
        }
      }
    }
  }
}

query getCategoryInfo($categoryName: String, $categoryPriority: Int) {
  categoryTags(filters: { name: { eq: $categoryName }, priority: { eq: $categoryPriority } }) {
    data {
      id
      attributes {
        name
        description
        related_tags {
          data {
            attributes {
              name
              thumbnail: pictures(pagination: { limit: 1 }) {
                data {
                  attributes {
                    media {
                      data {
                        attributes {
                          formats
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    }
  }
}

mutation postComment($id: ID!, $author: String!, $text: String!, $date: DateTime!) {
  createComment(
    data: { author: $author, text: $text, date: $date, picture: $id, publishedAt: null }
  ) {
    data {
      attributes {
        text
      }
    }
  }
}

query getKeywordTagSuggestions($name: String) {
  keywordTags(filters: { name: { containsi: $name } }) {
    data {
      id
      attributes {
        name
        thumbnail: pictures(pagination: { limit: 1 }) {
          data {
            attributes {
              media {
                data {
                  attributes {
                    formats
                  }
                }
              }
            }
          }
        }
      }
    }
  }
}

query getDecadePreviewThumbnails {
  s40: pictures(
    filters: {
      time_range_tag: {
        start: { gte: "1900-01-01T00:00:00Z" }
        end: { lte: "1949-12-31T23:59:59Z" }
      }
    }
    pagination: { limit: 1 }
  ) {
    data {
      attributes {
        media {
          data {
            attributes {
              formats
            }
          }
        }
      }
    }
  }
  s50: pictures(
    filters: {
      time_range_tag: {
        start: { gte: "1950-01-01T00:00:00Z" }
        end: { lte: "1959-12-31T23:59:59Z" }
      }
    }
    pagination: { limit: 1 }
  ) {
    data {
      attributes {
        media {
          data {
            attributes {
              formats
            }
          }
        }
      }
    }
  }
  s60: pictures(
    filters: {
      time_range_tag: {
        start: { gte: "1960-01-01T00:00:00Z" }
        end: { lte: "1969-12-31T23:59:59Z" }
      }
    }
    pagination: { limit: 1 }
  ) {
    data {
      attributes {
        media {
          data {
            attributes {
              formats
            }
          }
        }
      }
    }
  }
  s70: pictures(
    filters: {
      time_range_tag: {
        start: { gte: "1970-01-01T00:00:00Z" }
        end: { lte: "1979-12-31T23:59:59Z" }
      }
    }
    pagination: { limit: 1 }
  ) {
    data {
      attributes {
        media {
          data {
            attributes {
              formats
            }
          }
        }
      }
    }
  }
  s80: pictures(
    filters: {
      time_range_tag: {
        start: { gte: "1980-01-01T00:00:00Z" }
        end: { lte: "1989-12-31T23:59:59Z" }
      }
    }
    pagination: { limit: 1 }
  ) {
    data {
      attributes {
        media {
          data {
            attributes {
              formats
            }
          }
        }
      }
    }
  }
  s90: pictures(
    filters: {
      time_range_tag: {
        start: { gte: "1990-01-01T00:00:00Z" }
        end: { lte: "1999-12-31T23:59:59Z" }
      }
    }
    pagination: { limit: 1 }
  ) {
    data {
      attributes {
        media {
          data {
            attributes {
              formats
            }
          }
        }
      }
    }
  }
}
